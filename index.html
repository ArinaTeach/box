<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Colour Match ‚Äî 30s</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#050817;
      --stroke:rgba(255,255,255,.10);
      --text:#e8eeff;
      --muted:rgba(232,238,255,.70);
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --radius: 22px;
    }

    *{ box-sizing:border-box; margin:0; padding:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; }
    body{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 20px;
      background: radial-gradient(1200px 800px at 25% 20%, rgba(99,102,241,.18), transparent 60%),
                  radial-gradient(900px 700px at 75% 80%, rgba(34,197,94,.14), transparent 55%),
                  linear-gradient(160deg, var(--bg1), var(--bg2));
      color: var(--text);
    }

    .app{
      width:min(1040px, 100%);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
    }
    @media (max-width: 900px){ .app{ grid-template-columns: 1fr; } }

    .panel{
      background: rgba(15, 23, 42, .78);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px); /* –æ—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞ –ø–∞–Ω–µ–ª—è—Ö, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ */
    }

    .main{
      padding: 22px;
      display:flex;
      flex-direction:column;
      gap: 16px;
      min-height: 420px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    .title{ display:flex; flex-direction:column; gap: 4px; }
    .title h1{ font-size: 22px; letter-spacing: .4px; line-height: 1.1; }
    .title p{ font-size: 13px; color: var(--muted); }

    .stats{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(2,6,23,.35);
      display:flex;
      gap: 8px;
      align-items:center;
      font-weight: 700;
    }
    .pill span{ font-weight: 600; color: var(--muted); font-size: 12px; letter-spacing: .2px; }
    .pill b{ font-size: 14px; letter-spacing: .3px; }

    .wordbox{
      flex: 1;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background:
        radial-gradient(500px 240px at 50% 35%, rgba(255,255,255,.07), transparent 65%),
        rgba(2,6,23,.20);
      position:relative;
      overflow:hidden;
      min-height: 240px;
    }

    /* ‚úÖ –ù–ï–¢ "–ø–µ–ª–µ–Ω—ã": –Ω–∏–∫–∞–∫–æ–≥–æ blur/–ø–ª–∞—à–∫–∏ –ø–æ–¥ —Å–ª–æ–≤–æ–º */
    .bigword{
      font-size: clamp(56px, 7vw, 112px);
      font-weight: 900;
      letter-spacing: 2px;
      text-transform: uppercase;
      line-height: 1;
      text-align:center;
      user-select:none;
      padding: 0;              /* –≤–∞–∂–Ω–æ */
      background: transparent; /* –≤–∞–∂–Ω–æ */
      border: none;            /* –≤–∞–∂–Ω–æ */
      border-radius: 0;        /* –≤–∞–∂–Ω–æ */
      text-shadow:
        0 18px 45px rgba(0,0,0,.65); /* –±–∞–∑–æ–≤–∞—è –≥–ª—É–±–∏–Ω–∞ */
      transition: transform .12s ease, opacity .12s ease, filter .12s ease;
    }

    /* ‚úÖ "–û–±–≤–æ–¥–∫–∞" —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ —Ç–µ–Ω–∏ ‚Äî —á—Ç–æ–±—ã BLACK/—Ç—ë–º–Ω—ã–µ —á–∏—Ç–∞–ª–∏—Å—å */
    .bigword.outline-dark{
      text-shadow:
        -2px 0 rgba(255,255,255,.22),
         2px 0 rgba(255,255,255,.22),
         0 -2px rgba(255,255,255,.22),
         0  2px rgba(255,255,255,.22),
         0 18px 45px rgba(0,0,0,.65);
    }

    /* ‚úÖ –î–ª—è WHITE/YELLOW (–æ—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã—Ö) ‚Äî —á—É—Ç—å —É—Å–∏–ª–∏—Ç—å —Ç—ë–º–Ω—É—é "–æ–±–≤–æ–¥–∫—É" */
    .bigword.outline-light{
      text-shadow:
        -2px 0 rgba(0,0,0,.45),
         2px 0 rgba(0,0,0,.45),
         0 -2px rgba(0,0,0,.45),
         0  2px rgba(0,0,0,.45),
         0 18px 45px rgba(0,0,0,.65);
    }

    .hint{
      position:absolute;
      bottom: 14px;
      left: 14px;
      right: 14px;
      font-size: 13px;
      color: var(--muted);
      display:flex;
      justify-content:space-between;
      gap: 10px;
      opacity: .95;
    }

    .flash{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity .15s ease;
      background: radial-gradient(700px 340px at 50% 40%, rgba(255,255,255,.18), transparent 60%);
    }
    .flash.show{ opacity:1; }

    .controls{
      padding: 18px;
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .buttons{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    @media (max-width: 520px){ .buttons{ grid-template-columns: 1fr; } }

    /* ‚úÖ –∫–Ω–æ–ø–∫–∏ solid (–±–µ–∑ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤) */
    .btn{
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 18px;
      padding: 16px 16px;
      font-size: 18px;
      font-weight: 900;
      letter-spacing: .8px;
      cursor:pointer;
      user-select:none;
      position:relative;
      box-shadow: 0 10px 28px rgba(0,0,0,.35);
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease;
      transform: translateZ(0);
      text-transform: uppercase;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 12px;
      background: var(--btn-bg, #334155);
      color: var(--btn-text, rgba(255,255,255,.92));
    }

    /* –ª—ë–≥–∫–∏–π –±–ª–∏–∫ —Å–≤–µ—Ä—Ö—É (–Ω–µ "–ø–µ–ª–µ–Ω–∞") */
    .btn::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: inherit;
      background: linear-gradient(to bottom, rgba(255,255,255,.10), rgba(255,255,255,0) 45%);
      pointer-events:none;
      opacity:.9;
    }

    .btn:active{
      transform: scale(.98);
      filter: brightness(.98);
      box-shadow: 0 6px 18px rgba(0,0,0,.28);
    }
    .btn:focus-visible{
      outline: 3px solid rgba(255,255,255,.22);
      outline-offset: 2px;
    }

    .btn .dot{
      width: 12px; height: 12px;
      border-radius: 50%;
      background: var(--dot-bg, rgba(255,255,255,.9));
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
      flex: 0 0 12px;
    }

    .meta{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .action{
      flex:1;
      min-width: 170px;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(2,6,23,.35);
      color: var(--text);
      cursor:pointer;
      font-weight: 800;
      transition: transform .08s ease, filter .12s ease;
    }
    .action:active{ transform: scale(.99); filter: brightness(.98); }

    .action.primary{
      background: linear-gradient(135deg, rgba(99,102,241,.35), rgba(59,130,246,.18));
      border-color: rgba(99,102,241,.35);
    }

    .small{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.45;
    }

    .toast{ margin-top: 2px; min-height: 22px; font-size: 13px; color: var(--muted); }
    .toast.good{ color: rgba(34,197,94,.95); }
    .toast.bad{  color: rgba(239,68,68,.95); }

    .disabled{ opacity:.6; pointer-events:none; filter: grayscale(.15); }

    .shake{ animation: shake .25s ease; }
    @keyframes shake{
      0%{ transform: translateX(0); }
      25%{ transform: translateX(-6px); }
      50%{ transform: translateX(6px); }
      75%{ transform: translateX(-4px); }
      100%{ transform: translateX(0); }
    }

    .pulse{ animation: pulse .22s ease; }
    @keyframes pulse{
      0%{ transform: scale(1); }
      60%{ transform: scale(1.02); }
      100%{ transform: scale(1); }
    }
  </style>
</head>
<body>
  <div class="app">
    <section class="panel main" aria-label="–ò–≥—Ä–∞ Colour Match">
      <div class="topbar">
        <div class="title">
          <h1>Colour Match</h1>
          <p>–ù–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫—É –ø–æ —Ü–≤–µ—Ç—É —Ç–µ–∫—Å—Ç–∞, –∞ –Ω–µ –ø–æ —Å–ª–æ–≤—É.</p>
        </div>
        <div class="stats">
          <div class="pill"><span>–í—Ä–µ–º—è</span><b id="time">30</b></div>
          <div class="pill"><span>–û—á–∫–∏</span><b id="score">0</b></div>
          <div class="pill"><span>–°–µ—Ä–∏—è</span><b id="streak">0</b></div>
        </div>
      </div>

      <div class="wordbox" id="wordbox">
        <div class="flash" id="flash"></div>
        <div class="bigword" id="word">READY</div>
        <div class="hint">
          <div id="status">–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª.</div>
          <div>Space ‚Äî —Å—Ç–∞—Ä—Ç/–ø–∞—É–∑–∞</div>
        </div>
      </div>
    </section>

    <aside class="panel controls" aria-label="–ö–Ω–æ–ø–∫–∏ —Ü–≤–µ—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ">
      <div class="buttons" id="buttons"></div>

      <div class="meta">
        <button class="action primary" id="startBtn">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
        <button class="action" id="resetBtn">‚Ü∫ –°–±—Ä–æ—Å</button>
      </div>

      <div class="toast" id="toast"></div>

      <div class="small">
        <b>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</b> —Å–ª–æ–≤–æ –∏ —Ü–≤–µ—Ç (colour) —à—Ä–∏—Ñ—Ç–∞ —Å–ª—É—á–∞–π–Ω—ã–µ. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã–±—Ä–∞—Ç—å
        –∫–Ω–æ–ø–∫—É –ø–æ <b>—Ü–≤–µ—Ç—É</b>. –ó–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç +1 –æ—á–∫–æ. –ò–≥—Ä–∞ –¥–ª–∏—Ç—Å—è <b>30 —Å–µ–∫—É–Ω–¥</b>.
      </div>
    </aside>
  </div>

  <script>
    // ‚úÖ —Ä–∞–∑–ª–∏—á–∏–º—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ YELLOW / ORANGE / BROWN)
    const COLOURS = [
      { key: "RED",    hex: "#FF0000" },
      { key: "BLUE",   hex: "#2563EB" },
      { key: "GREEN",  hex: "#16A34A" },
      { key: "YELLOW", hex: "#FFD400" },
      { key: "PURPLE", hex: "#7C3AED" },
      { key: "ORANGE", hex: "#FF6A00" },
      { key: "PINK",   hex: "#FF3EA5" },
      { key: "BROWN",  hex: "#6B3F1D" },
      { key: "BLACK",  hex: "#0B1220" },
      { key: "WHITE",  hex: "#F8FAFC" }
    ];

    // --- DOM ---
    const elWord = document.getElementById("word");
    const elTime = document.getElementById("time");
    const elScore = document.getElementById("score");
    const elStreak = document.getElementById("streak");
    const elButtons = document.getElementById("buttons");
    const elToast = document.getElementById("toast");
    const elStatus = document.getElementById("status");
    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");
    const flash = document.getElementById("flash");
    const wordbox = document.getElementById("wordbox");

    // --- State ---
    let running = false;
    let timeLeft = 30;
    let score = 0;
    let streak = 0;
    let timerId = null;
    let currentCorrectKey = null;

    function randomFrom(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function hexToRgb(hex){
      const h = hex.replace("#","").trim();
      const full = h.length === 3 ? h.split("").map(ch => ch+ch).join("") : h;
      const n = parseInt(full, 16);
      return { r:(n>>16)&255, g:(n>>8)&255, b:n&255 };
    }

    function luminanceFromHex(hex){
      const { r, g, b } = hexToRgb(hex);
      return (0.2126*r + 0.7152*g + 0.0722*b) / 255;
    }

    function pickButtonText(bgHex){
      const lum = luminanceFromHex(bgHex);
      return lum > 0.70 ? "#0b1020" : "rgba(255,255,255,.92)";
    }

    function pickDot(bgHex){
      const lum = luminanceFromHex(bgHex);
      return lum > 0.70 ? "rgba(0,0,0,.55)" : "rgba(255,255,255,.90)";
    }

    // --- Buttons ---
    function renderButtons(){
      elButtons.innerHTML = "";
      COLOURS.forEach((c) => {
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.dataset.key = c.key;

        btn.style.setProperty("--btn-bg", c.hex);
        btn.style.setProperty("--btn-text", pickButtonText(c.hex));
        btn.style.setProperty("--dot-bg", pickDot(c.hex));

        if (c.key === "BLACK") btn.style.borderColor = "rgba(255,255,255,.22)";
        if (c.key === "WHITE") btn.style.borderColor = "rgba(255,255,255,.28)";

       btn.innerHTML = `<span>${c.key}</span>`;

        btn.addEventListener("click", () => choose(c.key));
        elButtons.appendChild(btn);
      });
    }

    // --- Round ---
    function nextRound(){
      const word = randomFrom(COLOURS).key;   // displayed word
      const colourObj = randomFrom(COLOURS);  // font colour (correct)
      currentCorrectKey = colourObj.key;

      elWord.style.opacity = "0";
      elWord.style.transform = "translateY(6px) scale(.99)";

      setTimeout(() => {
        elWord.textContent = word;
        elWord.style.color = colourObj.hex;

        // ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –ø–ª–∞—à–µ–∫. –¢–æ–ª—å–∫–æ —É–º–Ω–∞—è "–æ–±–≤–æ–¥–∫–∞" —á–µ—Ä–µ–∑ text-shadow:
        const lum = luminanceFromHex(colourObj.hex);
        elWord.classList.remove("outline-dark", "outline-light");

        // —Ç—ë–º–Ω—ã–µ (BLACK/BROWN/—Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–µ) -> —Å–≤–µ—Ç–ª–∞—è –æ–±–≤–æ–¥–∫–∞
        if (lum < 0.25) elWord.classList.add("outline-dark");
        // –æ—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–µ (WHITE/YELLOW) -> —Ç—ë–º–Ω–∞—è –æ–±–≤–æ–¥–∫–∞
        if (lum > 0.80) elWord.classList.add("outline-light");

        elWord.style.opacity = "1";
        elWord.style.transform = "translateY(-2px) scale(1)";
      }, 90);
    }

    // --- Choose ---
    function choose(key){
      if(!running) return;

      const correct = (key === currentCorrectKey);
      if(correct){
        score += 1;
        streak += 1;
        pingToast("‚úÖ –í–µ—Ä–Ω–æ!", "good");
        pulseWordbox();
        flashOnce();
      }else{
        streak = 0;
        pingToast(`‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${currentCorrectKey}`, "bad");
        shakeWordbox();
      }

      updateStats();
      nextRound();
    }

    function updateStats(){
      elTime.textContent = String(timeLeft);
      elScore.textContent = String(score);
      elStreak.textContent = String(streak);
    }

    function setRunningUI(isRunning){
      running = isRunning;
      startBtn.textContent = running ? "‚è∏ –ü–∞—É–∑–∞" : "‚ñ∂ –°—Ç–∞—Ä—Ç";
      elButtons.classList.toggle("disabled", !running);
      elStatus.textContent = running ? "–ò–≥—Ä–∞–π!" : "–ü–∞—É–∑–∞ / –æ–∂–∏–¥–∞–Ω–∏–µ.";
    }

    function startGame(){
      if(running){ pauseGame(); return; }
      if(timeLeft <= 0){ resetGame(); }

      setRunningUI(true);
      pingToast("", "");
      nextRound();

      timerId = setInterval(() => {
        timeLeft -= 1;
        updateStats();
        if(timeLeft <= 0) endGame();
      }, 1000);
    }

    function pauseGame(){
      setRunningUI(false);
      clearInterval(timerId);
      timerId = null;
      pingToast("‚è∏ –ü–∞—É–∑–∞. –ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.", "");
    }

    function endGame(){
      setRunningUI(false);
      clearInterval(timerId);
      timerId = null;
      timeLeft = 0;
      updateStats();
      elWord.textContent = "TIME!";
      elWord.style.color = "rgba(232,238,255,.92)";
      elWord.classList.remove("outline-dark", "outline-light");
      pingToast(`üèÅ –ì–æ—Ç–æ–≤–æ! –¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∑–∞ 30 —Å–µ–∫—É–Ω–¥.`, "good");
      elStatus.textContent = "–í—Ä–µ–º—è –≤—ã—à–ª–æ.";
    }

    function resetGame(){
      clearInterval(timerId);
      timerId = null;
      running = false;
      timeLeft = 30;
      score = 0;
      streak = 0;
      currentCorrectKey = null;

      updateStats();
      setRunningUI(false);
      elWord.textContent = "READY";
      elWord.style.color = "rgba(232,238,255,.92)";
      elWord.classList.remove("outline-dark", "outline-light");
      elStatus.textContent = "–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª.";
      pingToast("", "");
    }

    // --- Micro animations ---
    function pingToast(text, cls){
      elToast.textContent = text || "";
      elToast.className = "toast" + (cls ? (" " + cls) : "");
    }
    function shakeWordbox(){
      wordbox.classList.remove("shake");
      void wordbox.offsetWidth;
      wordbox.classList.add("shake");
    }
    function pulseWordbox(){
      wordbox.classList.remove("pulse");
      void wordbox.offsetWidth;
      wordbox.classList.add("pulse");
    }
    function flashOnce(){
      flash.classList.remove("show");
      void flash.offsetWidth;
      flash.classList.add("show");
      setTimeout(() => flash.classList.remove("show"), 140);
    }

    // Space = start/pause
    window.addEventListener("keydown", (e) => {
      if(e.code === "Space"){
        e.preventDefault();
        startGame();
      }
    });

    // init
    renderButtons();
    resetGame();
    startBtn.addEventListener("click", startGame);
    resetBtn.addEventListener("click", resetGame);
  </script>

<p><a href="./games/test/">Test game</a></p>
</body>
</html>

